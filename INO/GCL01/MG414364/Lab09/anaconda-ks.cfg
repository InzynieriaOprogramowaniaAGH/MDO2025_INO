# Generated by Anaconda 41.35
# Generated by pykickstart v3.58
#version=DEVEL

# Force text mode
text

# Keyboard layouts
keyboard --vckeymap=uk --xlayouts='gb','pl'
# System language
lang en_GB.UTF-8

# Network information
network  --bootproto=dhcp --device=enp0s3 --ipv6=auto --activate
network  --hostname=zombie-PC

%packages
@^server-product-environment

%end

# Run the Setup Agent on first boot
firstboot --enable

# Generated using Blivet version 3.11.0
ignoredisk --only-use=sda
autopart
# Partition clearing information
clearpart --none --initlabel

# System timezone
timezone Europe/Warsaw --utc

# Root password
rootpw --iscrypted --allow-ssh $y$j9T$1jvGVsUVnlZQQrQ7uupaQY3t$QIZJaSdzk2vtRvmgOdHg/GNlYVlbDJiAY0DehjapnB0
user --groups=wheel --name=MacGrze --password=123 --plaintext --gecos="Maciej Grzeda"

# Download, extract, and install RustScan (simplified)
%post --interpreter=/bin/bash
# Install necessary tools
dnf install -y wget tar xz

# Define the download URL and the name of the archive
RUSTSCAN_DOWNLOAD_URL="https://github.com/bee-san/RustScan/releases/download/2.3.0/rustscan-2.3.0-x86_64-linux.tar.xz"
ARCHIVE_NAME="rustscan-2.3.0-x86_64-linux.tar.xz"
TEMP_ARCHIVE_PATH="/tmp/${ARCHIVE_NAME}"
EXTRACTED_BINARY_NAME="rustscan"

# Download RustScan to /tmp
echo "Downloading RustScan..."
wget -O "${TEMP_ARCHIVE_PATH}" "${RUSTSCAN_DOWNLOAD_URL}"

echo "Extracting RustScan..."
tar -xvf "${TEMP_ARCHIVE_PATH}" -C /tmp

echo "Moving RustScan binary to /usr/local/bin..."
mv "/tmp/${EXTRACTED_BINARY_NAME}" "/usr/local/bin/${EXTRACTED_BINARY_NAME}"

echo "Setting execute permissions..."
chmod +x "/usr/local/bin/${EXTRACTED_BINARY_NAME}"

# Clean up the downloaded archive
echo "Cleaning up..."
rm -f "${TEMP_ARCHIVE_PATH}"

echo "RustScan installation complete."
%end
