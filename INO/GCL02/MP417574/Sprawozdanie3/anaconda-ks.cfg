#version=DEVEL
# Generated by Anaconda 41.35
# Generated by pykickstart v3.58

#### 1) Podstawowa konfiguracja
keyboard --vckeymap=us --xlayouts='us'
lang en_US.UTF-8
network --bootproto=dhcp --device=enp0s3 --hostname=fedora.test --ipv6=auto --activate

#### 2) Fedora default repos
url --mirrorlist=http://mirrors.fedoraproject.org/mirrorlist?repo=fedora-41&arch=x86_64
repo --name=update \
     --mirrorlist=http://mirrors.fedoraproject.org/mirrorlist?repo=updates-released-f41&arch=x86_64

#### 3) Metoda A: dodaj lokalne repo i debuguj
%pre --interpreter=/bin/bash
cat << 'EOF' > /etc/yum.repos.d/myrepo.repo
[myrepo]
name=Local CJSON Repo
baseurl=http://192.168.0.7/myrepo/
enabled=1
gpgcheck=0
EOF

# wrzuć listę repo do pliku, żebyśmy mogli potem w %post sprawdzić
yum repolist > /tmp/ks-repolist.txt
EOF
%end

#### 4) Jedynie konkretne pakiety — bez grup
%packages
cjson
gcc
glibc
curl
%end

#### 5) Reszta standardowa
firstboot --enable

ignoredisk --only-use=sda
clearpart --none --initlabel
autopart

timezone Europe/Warsaw --utc

rootpw --iscrypted --allow-ssh $y$j9T$f42zTKc8FiEAXyECki5fEwka$TuNUxPrCp2i9fdDQZY3W7TDOMG9aGTdtVCupZdfmsJ4
user --groups=wheel --name=kickstart \
     --password=$y$j9T$eKgdXsLTmrSEuSPjMoYgokYv$EzoYQqbicne4onhOqzWeVa420g3u.59tCdlzzVbTSb8 \
     --iscrypted --gecos="kickstart"

reboot

#### 6) Tymczasowo pomiń postinstall (sprawdzimy najpierw repolist i pakiety)
/*
%post --log=/tmp/postinstall.log --interpreter=/bin/bash
# tutaj wrócimy jak wyeliminuje się problem z pakietem
%end
*/
