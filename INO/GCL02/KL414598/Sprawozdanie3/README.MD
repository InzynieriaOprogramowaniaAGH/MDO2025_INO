# ğŸ§° Sprawozdanie z konfiguracji Ansible i zarzÄ…dzania artefaktem (Docker)

## ğŸ“¦ 1. Instalacja zarzÄ…dcy Ansible

### ğŸŒµ Utworzenie drugiej maszyny wirtualnej
Utworzono maszynÄ™ `ansible-target` z minimalnym zestawem oprogramowania, co ograniczyÅ‚o zbÄ™dne usÅ‚ugi i poprawiÅ‚o wydajnoÅ›Ä‡.

### ğŸŒµ Taki sam system operacyjny jak maszyna gÅ‚Ã³wna
Obie maszyny dziaÅ‚ajÄ… na systemie Ubuntu 24.04 LTS, co uÅ‚atwia zarzÄ…dzanie i eliminuje problemy kompatybilnoÅ›ci.

### ğŸŒµ Instalacja `tar` i `sshd`
Zainstalowano `tar` i `openssh-server`, aby umoÅ¼liwiÄ‡ obsÅ‚ugÄ™ archiwÃ³w i dostÄ™p przez SSH.

### ğŸŒµ Nadanie hostname `ansible-target`
Nazwa hosta zostaÅ‚a ustawiona juÅ¼ podczas instalacji systemu ale jeszcze siÄ™ upewniÅ‚em.

![Opis](ss/1.jpg)


### ğŸŒµ Wykonanie migawki maszyny
Zrobiono migawkÄ™ w VirtualBoxie, co pozwala wrÃ³ciÄ‡ do stanu poczÄ…tkowego w razie problemÃ³w.

![Opis](ss/20.png)

### ğŸŒµ Instalacja Ansible na gÅ‚Ã³wnej maszynie
Na `server` zainstalowano Ansible za pomocÄ… APT:
```bash
sudo apt update && sudo apt install -y ansible
```
![Opis](ss/21.png)



### ğŸŒµ Wymiana kluczy SSH
Na `server` wygenerowano parÄ™ kluczy SSH i przesÅ‚ano je do `ansible@ansible-target`:
```bash
ssh-keygen
ssh-copy-id ansible@ansible-target
```
![Opis](ss/6.png)

---

## ğŸ—‚ï¸ 2. Inwentaryzacja

### ğŸŒµ Ustawienie nazw hostÃ³w
Ustawiono `hostnamectl` na obu maszynach:
```bash
hostnamectl set-hostname server
hostnamectl set-hostname ansible-target
```
![Opis](ss/7.png)



### ğŸŒµ Dodanie wpisÃ³w do /etc/hosts
Na maszynie `server` wpisano:
```
192.168.100.10 ansible-target
192.168.100.11 server
```
![Opis](ss/22.png)



### ğŸŒµ Weryfikacja Å‚Ä…cznoÅ›ci
Sprawdzono poÅ‚Ä…czenie:
```bash
ping ansible-target
ping server
```
![Opis](ss/23.png)



### ğŸŒµ Stworzenie pliku inwentaryzacji
Plik `inventory.ini`:
```ini
[Orchestrators]
server ansible_host=server ansible_user=krzysztof ansible_port=2222

[Endpoints]
ansible-target ansible_host=ansible-target ansible_user=ansible
```
![Opis](ss/6,5.png)
![Opis](ss/8.png)


### ğŸŒµ WysÅ‚anie ping przez Ansible
```bash
ansible -i inventory.ini all -m ping
```
![Opis](ss/11.png)




### ğŸŒµ UÅ¼yto dwÃ³ch maszyn wirtualnych
Projekt zostaÅ‚ przeprowadzony z wykorzystaniem dwÃ³ch maszyn: `server` i `ansible-target`.

### ğŸŒµ Ponowna wymiana kluczy ssh-copy-id
Upewniono siÄ™, Å¼e uÅ¼ytkownik `ansible` ma poprawnie dodany klucz publiczny.

### ğŸŒµ Weryfikacja bezhasÅ‚owego logowania
SSH dziaÅ‚aÅ‚o bez potrzeby wpisywania hasÅ‚a.

![Opis](ss/6.png)
---

## âš™ï¸ 3. Zdalne wywoÅ‚ywanie procedur

### ğŸŒµ Pingowanie z playbooka
Utworzono `ping.yml`:
```yaml
- hosts: all
  gather_facts: false
  tasks:
    - name: Ping
      ansible.builtin.ping:
```
![Opis](ss/12.png)

![Opis](ss/13.png)


### ğŸŒµ Skopiowanie pliku inwentaryzacji na zdalnÄ… maszynÄ™
```yaml
- hosts: Endpoints
  gather_facts: false
  tasks:
    - name: Copy inventory
      copy:
        src: ../inventory.ini
        dest: /home/ansible/inventory.ini
```

![Opis](ss/14.png)

![Opis](ss/15.png)

### ğŸŒµ PorÃ³wnanie wynikÃ³w
Po skopiowaniu inventory na `ansible-target` uruchomiono test pingowy zdalnie â€” wynik byÅ‚ identyczny jak z `server`.

### ğŸŒµ Aktualizacja systemu
```yaml
- hosts: Endpoints
  become: true
  tasks:
    - name: Update APT
      apt:
        update_cache: yes

    - name: Upgrade packages
      apt:
        upgrade: dist
```

![Opis](ss/16.png)
![Opis](ss/17.png)

### ğŸŒµ Restart usÅ‚ug sshd i rngd
```yaml
- hosts: Endpoints
  become: true
  tasks:
    - name: Restart sshd
      service:
        name: ssh
        state: restarted

    - name: Restart rngd
      service:
        name: rngd
        state: restarted
      ignore_errors: true
```

![Opis](ss/18.png)
![Opis](ss/19.png)

### ğŸŒµ Test awarii (SSH down, interfejs down)
WyÅ‚Ä…czono `sshd` i kartÄ™ sieciowÄ…. Ansible zgÅ‚osiÅ‚ `UNREACHABLE` â€” zgodnie z oczekiwaniami.

---

## ğŸ³ 4. ZarzÄ…dzanie artefaktem (kontener)

### ğŸŒµ Budowa i uruchomienie kontenera
W playbooku uÅ¼yto obrazu `nginx:alpine`, ktÃ³ry zostaÅ‚ uruchomiony na porcie 8080.

### ğŸŒµ Pobranie z Docker Hub
Ansible pobraÅ‚ oficjalny obraz `nginx:alpine` bez potrzeby budowania lokalnego obrazu.

### ğŸŒµ Instalacja Dockera przez Ansible
Rola `deploy_container` automatycznie instalowaÅ‚a Dockera przez APT.

### ğŸŒµ Weryfikacja dziaÅ‚ania aplikacji
Sprawdzono dostÄ™pnoÅ›Ä‡ strony pod `http://localhost:8080` za pomocÄ… moduÅ‚u `uri`.

### ğŸŒµ UsuniÄ™cie kontenera
Na koniec, kontener `hello-app` zostaÅ‚ usuniÄ™ty z maszyny docelowej przez Ansible.

---

## âœ… 5. Podsumowanie

- ğŸ–¥ï¸ Åšrodowisko skÅ‚ada siÄ™ z dwÃ³ch maszyn wirtualnych
- ğŸ” Zrealizowano logowanie bez hasÅ‚a
- ğŸ“‚ Plik inwentaryzacji z grupami: `Orchestrators` i `Endpoints`
- âš™ï¸ Stworzono playbooki do pingu, kopiowania, aktualizacji, restartu usÅ‚ug
- ğŸ³ WdroÅ¼ono i przetestowano kontener aplikacji z Docker Hub
- ğŸ“¦ RolÄ™ stworzono przy uÅ¼yciu `ansible-galaxy`

_____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________



# ğŸ“ Sprawozdanie: Pliki odpowiedzi dla wdroÅ¼eÅ„ nienadzorowanych

## ğŸ¯ Zagadnienie

Zadanie dotyczyÅ‚o przygotowania automatycznego ÅºrÃ³dÅ‚a instalacyjnego systemu Fedora 42 â€” przydatnego w Å›rodowiskach testowych, serwerowych lub IoT. Instalacja miaÅ‚a odbywaÄ‡ siÄ™ w peÅ‚ni automatycznie, dziÄ™ki zastosowaniu pliku odpowiedzi Kickstart.

---

## ğŸ¯ Cel zadania

- Utworzenie pliku odpowiedzi `kickstart` do instalacji systemu.
- Zainstalowanie systemu Fedora 42 na maszynie wirtualnej w trybie nienadzorowanym.
- Upewnienie siÄ™, Å¼e system uruchamia siÄ™ w peÅ‚ni skonfigurowany i gotowy do hostowania aplikacji.

---

## ğŸ“¦ Åšrodowisko i narzÄ™dzia

- Oracle VirtualBox
- Obraz ISO Fedora 42 Everything Netinst
- Plik `anaconda-ks.cfg` z repozytorium GitHub
- Edytor nano, przeglÄ…darka, TinyURL

---

## ğŸªœ Kroki realizacji

### 1. Uruchomienie instalatora z ISO

Na poczÄ…tku uruchomiÅ‚em maszynÄ™ wirtualnÄ… z obrazem instalacyjnym Fedora 42 w trybie â€œTest this media & install Fedora 42â€.

ğŸ“· 
![Opis](ss/201.png)
![Opis](ss/202.png)



---

### 2. Problem z dÅ‚ugim linkiem i uÅ¼ycie TinyURL

Podczas konfiguracji GRUB okazaÅ‚o siÄ™, Å¼e nie mogÄ™ wkleiÄ‡ dÅ‚ugiego linku do GitHub Raw z plikiem Kickstart. W zwiÄ…zku z tym postanowiÅ‚em uÅ¼yÄ‡ serwisu [TinyURL](https://tinyurl.com) do skrÃ³cenia odnoÅ›nika.

![Opis](ss/203.png)
![Opis](ss/204.png)

Link do pliku Kickstart:
```
https://tinyurl.com/bdejyufr
```

---

### 3. Uruchomienie instalacji z pliku Kickstart

Instalator wykryÅ‚ plik Kickstart i rozpoczÄ…Å‚ instalacjÄ™ automatycznÄ…. W logach widaÄ‡ byÅ‚o, Å¼e uÅ¼ywany jest tryb tekstowy, co potwierdza wykorzystanie `inst.ks`.


![Opis](ss/206.png)
![Opis](ss/207.png)


---

### 4. WejÅ›cie do Anaconda GUI

ChoÄ‡ instalacja byÅ‚a automatyczna, pojawiÅ‚o siÄ™ okno z podsumowaniem konfiguracji. MusiaÅ‚em rÄ™cznie dokoÅ„czyÄ‡ konfiguracjÄ™ uÅ¼ytkownika i konta root.

ğŸ“· ![Anaconda GUI - podsumowanie instalacji](./202.png)

---

### 5. PostÄ™p instalacji

Po uzupeÅ‚nieniu wymaganych danych, instalacja postÄ™powaÅ‚a dalej, tworzÄ…c partycjÄ™ rozruchowÄ… i systemowÄ….

ğŸ“· ![PostÄ™p instalacji - tworzenie biosboot](./203.png)

---

### 6. ZawartoÅ›Ä‡ pliku Kickstart

Po zakoÅ„czeniu instalacji otworzyÅ‚em wygenerowany plik `/root/anaconda-ks.cfg` i sprawdziÅ‚em jego poprawnoÅ›Ä‡. ZnajdujÄ… siÄ™ w nim wszystkie kluczowe elementy:

- Repozytoria online
- Partycjonowanie i czyszczenie dysku
- HasÅ‚a i uÅ¼ytkownik
- Ustawienia strefy czasowej

ğŸ“· ![Plik Kickstart w nano](./204.png)

---

### 7. PorÃ³wnanie z wersjÄ… z GitHuba

PorÃ³wnaÅ‚em lokalny plik z oryginaÅ‚em znajdujÄ…cym siÄ™ w repozytorium GitHub. Pliki sÄ… zgodne.

ğŸ“· ![Kickstart z GitHub Raw](./205.png)

---

## âœ… Podsumowanie

PrzygotowaÅ‚em Å›rodowisko instalacyjne systemu Fedora 42, ktÃ³ry uruchamia siÄ™ automatycznie dziÄ™ki zastosowaniu pliku Kickstart. DziÄ™ki temu rozwiÄ…zaniu moÅ¼liwe jest szybkie i spÃ³jne wdraÅ¼anie Å›rodowisk testowych lub serwerowych. Problem z dÅ‚ugim linkiem zostaÅ‚ rozwiÄ…zany przez uÅ¼ycie TinyURL.

