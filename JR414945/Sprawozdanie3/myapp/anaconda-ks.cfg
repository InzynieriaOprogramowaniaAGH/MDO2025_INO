# Generated by Anaconda 39.32.6
# Generated by pykickstart v3.48
#version=DEVEL
# Use text install
text

# Keyboard layouts
keyboard --vckeymap=pl --xlayouts='pl'
# System language
lang pl_PL.UTF-8

url --mirrorlist=https://mirrors.fedoraproject.org/mirrorlist?repo=fedora-41&arch=x86_64
repo --name=update --mirrorlist=https://mirrors.fedoraproject.org/mirrorlist?repo=updates-released-f41&arch=x86_64

%packages
@^server-product-environment
@core
%end

# Run the Setup Agent on first boot
firstboot --enable

# Generated using Blivet version 3.8.1
ignoredisk --only-use=sda
autopart
# Partition clearing information
clearpart --all --initlabel

# System timezone
timezone Europe/Warsaw --utc

# UÅ¼ytkownicy
rootpw --iscrypted $y$j9T$bYsrlfsT.xOz.HnFs6p0.CGV$KJfyHWnlC2QSn.C4iSKF4.n/cXOkHeBWnkzc.ir3W.6
user --groups=wheel --name=jasiek --password=$y$j9T$pLqeTKbiuATpRiPcfZxPkjHm$y1ezi7L2OpuRomtwnXMcSEMYRXQ6ZUvqWNp3ACsGEa/ --iscrypted --gecos="jasiek"

network --hostname=unattendedmachine

%post

dnf install -y dnf-plugins-core


dnf config-manager --add-repo=https://download.docker.com/linux/fedora/docker-ce.repo


dnf install -y docker-ce docker-ce-cli containerd.io


systemctl enable --now docker


docker pull janekrzodki/nodeapp:latest


cat <<EOF > /usr/local/bin/start-docker-container.sh
#!/bin/bash
docker run -d --name mycontainer janekrzodki/nodeapp:latest
EOF


chmod +x /usr/local/bin/start-docker-container.sh


cat <<EOF > /etc/systemd/system/start-docker-container.service
[Unit]
Description=Start Docker Container
After=docker.service
Requires=docker.service

[Service]
Type=oneshot
ExecStart=/usr/local/bin/start-docker-container.sh
RemainAfterExit=true

[Install]
WantedBy=multi-user.target
EOF


systemctl enable start-docker-container.service
%end
