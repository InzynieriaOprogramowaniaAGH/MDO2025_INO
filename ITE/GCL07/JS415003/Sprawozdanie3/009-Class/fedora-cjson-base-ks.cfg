version=DEVEL
install
text
cmdline

# Installation method - network installation
url --mirrorlist=http://mirrors.fedoraproject.org/mirrorlist?repo=fedora-41&arch=x86_64

# Additional repositories
repo --name=updates --mirrorlist=http://mirrors.fedoraproject.org/mirrorlist?repo=updates-released-f41&arch=x86_64

# System language
lang en_GB.UTF-8

# Keyboard layouts
keyboard --vckeymap=uk --xlayouts='gb','pl'

# Network information
network --bootproto=dhcp --device=link --activate --hostname=fedora-server-new

# System timezone
timezone Europe/Warsaw --utc

rootpw --iscrypted --allow-ssh $y$j9T$XivJoeqr.DbiQ0w4fsCLXP9v$KlyYeI/lUg1ogsGLr4/1kjTHEvm4hw0r06PcvI8UeK2
user --groups=wheel --name=jakub --password=$y$j9T$V6eFSDElTVYzcJjXAmRhRTMT$VS86h3X2ATJl5.1hkEf1QLYcfjsj6kEF36sUcnD3aY7 --iscrypted --gecos="jakub"

# Disk configuration
ignoredisk --only-use=sda
clearpart --all --initlabel
autopart --type=lvm

# Boot loader configuration
bootloader --location=mbr --boot-drive=sda

# SELinux configuration
selinux --enforcing

# Firewall configuration
firewall --enabled --ssh

# Services
services --enabled=NetworkManager,sshd

# Skip X config
skipx

# Run the Setup Agent on first boot
firstboot --disable

# Reboot after installation
reboot

# Package selection
%packages
@^server-product-environment
@core
@standard
vim
wget
curl
git
htop
tree
bash-completion
%end

# Post-installation script
%post --log=/root/ks-post.log
#!/bin/bash
echo "Post-installation script started" >> /root/ks-post.log
dnf update -y >> /root/ks-post.log 2>&1
systemctl enable sshd >> /root/ks-post.log 2>&1
echo "Post-installation script completed" >> /root/ks-post.log
%end