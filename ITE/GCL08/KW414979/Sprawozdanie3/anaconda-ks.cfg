url --mirrorlist=http://mirrors.fedoraproject.org/mirrorlist?repo=fedora-38&arch=x86_64
repo --name=update --mirrorlist=http://mirrors.fedoraproject.org/mirrorlist?repo=updates-released-f38&arch=x86_64

#version=DEVEL
# Keyboard layouts
keyboard --vckeymap=pl --xlayouts='pl'

# System language
lang pl_PL.UTF-8

# Host name
network --bootproto=dhcp --hostname=fedora-docker-task.local

# System timezone
timezone Europe/Warsaw --utc

# Root password
rootpw --iscrypted --allow-ssh $y$j9T$iyCkDGXNeMxo.onIHwKHSF5w$Byz6BLs39SIg0ibbzU0bW5/7cwMmQpu33qRl8En5MX3
user --groups=wheel --name=kwoda --password=$y$j9T$TLLTaYiukfmpauwCCb5SxHLb$/XiNokf52CU3rOgoaeQYovHtbbPCTh84u2uj2uOeH40 --iscrypted --gecos="Karol Woda"

# Packages to install
%packages
@^custom-environment
docker
wget
git
cronie
%end

# Partition clearing information
ignoredisk --only-use=sda
clearpart --all --initlabel
autopart --type=lvm
bootloader --location=mbr --boot-drive=sda

# Run the Setup Agent on first boot
firstboot --enable

# Post installation
%post
set -x
systemctl enable docker
systemctl enable crond

mkdir -p /vol/bat_in
mkdir -p /vol/bat_out

echo "Przykładowy tekst 1" > /vol/bat_in/in.txt
echo "Przykładowy tekst 2" > /vol/bat_in/in2.txt

echo "@reboot /usr/bin/docker run --rm -v /vol/bat_in:/vol/bat_in -v /vol/bat_out:/vol/bat_out avokawo/bat_project" >> /var/spool/cron/root
%end

reboot



