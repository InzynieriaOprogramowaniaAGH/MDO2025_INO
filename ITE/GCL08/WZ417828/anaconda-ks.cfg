#version=DEVEL
# Generated by Anaconda

# Keyboard layouts and system language
keyboard --vckeymap=us --xlayouts='us'
lang en_US.UTF-8

# Repozytoria Fedora 41
url --mirrorlist=http://mirrors.fedoraproject.org/mirrorlist?repo=fedora-41&arch=x86_64
repo --name=updates --mirrorlist=http://mirrors.fedoraproject.org/mirrorlist?repo=updates-released-f41&arch=x86_64

# Strefa czasowa
timezone Europe/Warsaw --utc

# Ustawienia sieci
network --bootproto=dhcp --device=link --activate --hostname=kickstart.example.com

# Hasła
rootpw --iscrypted --allow-ssh $y$j9T$mc3CY06QdMt84pAvZsEO7w/.$wT/WvSzxVUc.Hfak8IBT4iMyCt21G99KP7mTJdrD/1/
user --groups=wheel --name=wzacharski --password=$y$j9T$wqyDOD3nPVMl0165gU78XuKS$QC1LG8PVFetDyiJWLOO/lM6q5Q2WOHBLb1Aknc1C2a3 --iscrypted --gecos="Wojciach Zacharski"

# Inne
firewall --enabled --service=ssh
selinux --enforcing
firstboot --disable
reboot

# Partycjonowanie
ignoredisk --only-use=sda
autopart
clearpart --all --initlabel


# Instalacja podstawowych pakietów
%packages 
@^server-product-environment
wget
curl
git
gcc
make
cmake
%end

# Skrypty post-installacyjne (%post)
%post --log=/root/ks-post.log

mkdir -p /home/wzacharski/cjson
cd /home/wzacharski/cjson
wget https://raw.githubusercontent.com/InzynieriaOprogramowaniaAGH/MDO2025_INO/WZ417828/ITE/GCL08/WZ417828/Sprawozdanie2/libcjson-1.7.18-1.x86_64.rpm -O cjson-1.7.18-1.x86_64.rpm
dnf install -y /home/wzacharski/cjson/cjson-1.7.18-1.x86_64.rpm

# Klonowanie repozytorium z testami
git clone https://github.com/DaveGamble/cJSON /home/wzacharski/cjson/cJSON

# Kompilacja i uruchomienie testów
cd /home/wzacharski/cjson
make tests

# Wypisanie wyników
echo "Wyniki testów cJSON:" >> /home/wzacharski/test_results.log
cat /home/wzacharski/test_results.log
%end


