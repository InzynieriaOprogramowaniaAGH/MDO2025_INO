# Generated by Anaconda 41.35
# Generated by pykickstart v3.58
#version=DEVEL

# Keyboard layouts and system language
keyboard --vckeymap=pl --xlayouts='pl'
lang en_US.UTF-8

# Repozytoria Fedora 41
url --mirrorlist=http://mirrors.fedoraproject.org/mirrorlist?repo=fedora-41&arch=x86_64
repo --name=updates --mirrorlist=http://mirrors.fedoraproject.org/mirrorlist?repo=updates-released-f41&arch=x86_64

# Ustawienia sieci
network --bootproto=dhcp --device=link --activate --hostname=kickstart.example.com

# Strefa czasowa
timezone Europe/Warsaw --utc

# Partycjonowanie
ignoredisk --only-use=sda
clearpart --all --initlabel
autopart

# Hasła
rootpw --iscrypted --allow-ssh $y$j9T$mc3CY06QdMt84pAvZsEO7w/.$wT/WvSzxVUc.Hfak8IBT4iMyCt21G99KP7mTJdrD/1/
user --groups=wheel --name=wzacharski --password=$y$j9T$wqyDOD3nPVMl0165gU78XuKS$QC1LG8PVFetDyiJWLOO/lM6q5Q2WOHBLb1Aknc1C2a3 --iscrypted --gecos="Wojciach Zacharski"

# Instalacja podstawowych pakietów
%packages --nobase --ignoremissing
@core
@network-tools
wget
curl
git
gcc
make
%end

# Skrypty post-installacyjne (%post)
%post --log=/root/ks-post.log

mkdir -p /usr/local/cjson
cd /usr/local/cjson
wget https://github.com/InzynieriaOprogramowaniaAGH/MDO2025_INO/blob/WZ417828/ITE/GCL08/WZ417828/Sprawozdanie2/libcjson-1.7.18-1.x86_64.rpm -O cjson-1.0.0-1.x86_64.rpm
dnf -y localinstall /usr/local/cjson/cjson-1.0.0-1.x86_64.rpm

# Klonowanie repozytorium z testami
git clone https://github.com/DaveGamble/cJSON /usr/local/cjson

# Kompilacja i uruchomienie testów
cd /usr/local/cjson/
make tests

# Wypisanie wyników
echo "Wyniki testów cJSON:" >> /root/test_results.log
cat /root/test_results.log  
%end

reboot
