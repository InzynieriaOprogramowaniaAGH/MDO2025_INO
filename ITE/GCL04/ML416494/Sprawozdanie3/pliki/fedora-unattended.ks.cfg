# Generated by Anaconda 42.27.12
# Generated by pykickstart v3.62
#version=DEVEL

# Keyboard layouts
keyboard --vckeymap=pl --xlayouts='pl'
# System language
lang pl_PL.UTF-8

%packages
@^server-product-environment

%end

# Run the Setup Agent on first boot
firstboot --enable

# Generated using Blivet version 3.12.1
ignoredisk --only-use=sda
autopart
# Partition clearing information
clearpart --all --initlabel

url --mirrorlist=http://mirrors.fedoraproject.org/mirrorlist?repo=fedora-38&arch=x86_64
repo --name=update --mirrorlist=http://mirrors.fedoraproject.org/mirrorlist?repo=updates-released-f38&arch=x86_64

network --hostname=fedora-unattended

# System timezone
timezone Europe/Warsaw --utc

# Root password
rootpw --iscrypted $y$j9T$nI8ZYCW4h8iYwyhnSapWhF8K$.77EzrQ89hMCt7mfi8arim9lOkOFv4IVHibHcfavGo6

%packages
@core
wget
curl
docker
%end

%post
echo "Włączam Docker i pobieram kontener..."
systemctl enable docker


cat <<EOF > /etc/systemd/system/myapp.service
[Unit]
Description=Start my containerized app
After=network.target docker.service
Requires=docker.service

[Service]
ExecStart=/usr/bin/docker run --rm --name myapp -p 8080:80 stundeto/test
Restart=always

[Install]
WantedBy=multi-user.target
EOF

systemctl enable myapp

%end
