- name: Ping
  hosts: all
  gather_facts: yes
  tasks:
    - name: PingAll
      ansible.builtin.ping:

- name: CopyInventory
  hosts: Endpoints
  gather_facts: yes
  tasks:
    - name: CopyInventory
      ansible.builtin.copy:
        src: ./inventory.ini
        dest: ~/inventory.ini


- name: UpdateAndRestart
  hosts: Endpoints
  become: true
  tasks:
    - name: UpdatePackages
      ansible.builtin.package:
        name: "*"
        state: latest

    - name: RestartSSHD
      ansible.builtin.service:
        name: sshd
        state: restarted

    - name: RestartRNGD
      ansible.builtin.service:
        name: rngd
        state: restarted