- name: My first playbook
  hosts: Endpoints
  become: yes 
  tasks:
   - name: Pinguj maszyny
     ansible.builtin.ping:

   - name: Skopiuj plik  inwentaryzacji na maszyny
     ansible.builtin.copy:
        src: inventory.ini
        dest: /home/ansible/inventory.ini
        owner: ansible
        group: ansible
        mode: '0644'

   - name: Ponownie skopiuj plik inwentaryzacji na maszyny
     ansible.builtin.copy:
        src: inventory.ini
        dest: /home/ansible/inventory.ini
        owner: ansible
        group: ansible
        mode: '0644'

   - name: Zaktualizuj wszystkie pakiety w systemie (z rozwiązaniem konfliktów)
     ansible.builtin.dnf:
        name: "*"
        state: latest
        update_cache: yes
        allowerasing: yes
        nobest: yes
     become: yes

   - name: Zrestartuj usługę sshd
     ansible.builtin.service:
        name: sshd
        state: restarted
        

   - name: Zrestartuj usługę rngd
     ansible.builtin.service:
        name: rngd
        state: restarted