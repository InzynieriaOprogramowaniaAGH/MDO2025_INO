# Generated by Anaconda 41.35
# Generated by pykickstart v3.58
#version=DEVEL

# Keyboard layouts
keyboard --vckeymap=us --xlayouts='us'
# System language
lang en_US.UTF-8

url --mirrorlist=http://mirrors.fedoraproject.org/mirrorlist?repo=fedora-41&arch=aarch64
repo --name="updates" --mirrorlist=http://mirrors.fedoraproject.org/mirrorlist?repo=updates-released-f41&arch=aarch64

network --hostname=jorjor-wel

%packages
@^server-product-environment
docker
%end


# Run the Setup Agent on first boot
firstboot --enable

# Generated using Blivet version 3.11.0
ignoredisk --only-use=sda
autopart
# Partition clearing information
clearpart --all

# System timezone
timezone Europe/Warsaw --utc

#Root password
rootpw --lock
user --groups=wheel --name=reszczak --password=$y$j9T$DbwumVx7mTUvKTUUutt4QJrP$IVsAp1s3GPV2nr6pxfDqc0HpA06a1iJDOhUXOIp/BN0 --iscrypted --gecos="Dawid Reszczynski"


%post --erroronfail --log=/root/post.log
usermod -aG docker root
systemctl enable docker

cat << 'EOF' > /etc/systemd/system/docker-irssi-deploy.service
[Unit]
Description=Download and run Irssi container
Requires=docker.service
After=docker.service

[Service]
Type=oneshot
ExecStart=/usr/bin/docker pull ullei/irssi:1.0.0
ExecStart=/usr/bin/docker run -d -it --name irssi reszczak123/irssi:1.4.5

[Install]
WantedBy=multi-user.target
EOF

systemctl daemon-reload
systemctl enable docker-irssi-deploy.service
systemctl start docker-irssi-deploy.service

%end
