 Konteneryzacja: Terminologia, Jenkins i Eksperymenty z Dockerem
PoniÅ¼ej znajduje siÄ™ szczegÃ³Å‚owy przewodnik krok po kroku na temat woluminÃ³w, sieci, Jenkins, komunikacji oraz uruchamiania usÅ‚ug w kontenerach.

1ï¸âƒ£ Zachowywanie stanu (Woluminy)
Dokumentacja:
ğŸ“Œ Volumes
ğŸ“Œ Bind mounts
ğŸ“Œ RUN --mount

ğŸ“Œ Tworzenie woluminÃ³w wejÅ›ciowego i wyjÅ›ciowego
ğŸ”¹ Wolumin wejÅ›ciowy â€“ do przechowywania kodu ÅºrÃ³dÅ‚owego
ğŸ”¹ Wolumin wyjÅ›ciowy â€“ do przechowywania wynikÃ³w kompilacji

bash
Copy
Edit
docker volume create vol_input
docker volume create vol_output
ğŸ“Œ Sprawdzenie utworzonych woluminÃ³w

bash
Copy
Edit
docker volume ls
ğŸ“Œ Uruchomienie kontenera i podÅ‚Ä…czenie woluminÃ³w
bash
Copy
Edit
docker run -it --rm \
    -v vol_input:/app/src \
    -v vol_output:/app/build \
    ubuntu bash
âœ… Teraz moÅ¼emy pracowaÄ‡ wewnÄ…trz kontenera!

ğŸ“Œ Klonowanie repozytorium do woluminu wejÅ›ciowego
ğŸ”¹ MoÅ¼emy to zrobiÄ‡ spoza kontenera:

bash
Copy
Edit
git clone https://github.com/example/repo.git $(docker volume inspect vol_input --format '{{ .Mountpoint }}')
ğŸ”¹ Lub wewnÄ…trz kontenera (wymaga git):

bash
Copy
Edit
apt update && apt install -y git
cd /app/src
git clone https://github.com/example/repo.git .
âœ… Kod ÅºrÃ³dÅ‚owy znajduje siÄ™ teraz w woluminie wejÅ›ciowym!

ğŸ“Œ Uruchomienie buildu i zapis wynikÃ³w na wolumin wyjÅ›ciowy
bash
Copy
Edit
cd /app/src
make build
cp -r build /app/build
ğŸ“Œ Teraz pliki wynikowe sÄ… w vol_output i dostÄ™pne poza kontenerem!

2ï¸âƒ£ Eksponowanie portu: iPerf
ğŸ“Œ Dokumentacja iPerf

ğŸ“Œ Uruchomienie serwera iperf3 w kontenerze
bash
Copy
Edit
docker run --rm -it --name iperf-server -p 5201:5201 networkstatic/iperf3 -s
ğŸ“Œ Serwer dziaÅ‚a i czeka na poÅ‚Ä…czenia na porcie 5201!

ğŸ“Œ PoÅ‚Ä…czenie z serwerem z drugiego kontenera
bash
Copy
Edit
docker run --rm networkstatic/iperf3 -c 172.17.0.2
ğŸ“Œ ZmierzyliÅ›my przepustowoÅ›Ä‡ sieci w kontenerach!

3ï¸âƒ£ Dedykowana sieÄ‡ Docker (network create)
ğŸ“Œ Docker Networks

ğŸ“Œ Tworzymy wÅ‚asnÄ… sieÄ‡ mostkowÄ…
bash
Copy
Edit
docker network create my_network
ğŸ“Œ Uruchomienie serwera iperf3 w nowej sieci
bash
Copy
Edit
docker run --rm -it --network my_network --name iperf-server networkstatic/iperf3 -s
ğŸ“Œ PoÅ‚Ä…czenie klienta przez nazwÄ™ hosta (zamiast IP!)
bash
Copy
Edit
docker run --rm --network my_network networkstatic/iperf3 -c iperf-server
âœ… DziÄ™ki temu kontenery komunikujÄ… siÄ™ po nazwach zamiast adresÃ³w IP!

4ï¸âƒ£ Instalacja Jenkinsa (Dockerized Jenkins)
ğŸ“Œ Instalacja Jenkinsa w Dockerze

ğŸ“Œ Uruchomienie instancji Jenkinsa z DIND
bash
Copy
Edit
docker network create jenkins

docker run --rm -d \
    --name jenkins-dind \
    --network jenkins \
    --privileged \
    -v jenkins_home:/var/jenkins_home \
    docker:dind
ğŸ“Œ Uruchomienie samego Jenkinsa
bash
Copy
Edit
docker run --rm -d \
    --name jenkins \
    --network jenkins \
    -p 8080:8080 -p 50000:50000 \
    -v jenkins_home:/var/jenkins_home \
    jenkins/jenkins:lts
âœ… Jenkins dziaÅ‚a! MoÅ¼na wejÅ›Ä‡ na http://localhost:8080 i skonfigurowaÄ‡!

5ï¸âƒ£ SSHD w kontenerze Ubuntu/Fedora
ğŸ“Œ W Ubuntu/Fedora moÅ¼na uruchomiÄ‡ usÅ‚ugÄ™ SSHD, ale...
ğŸ”¹ Nie jest to dobra praktyka w kontenerach (Docker sam zarzÄ…dza dostÄ™pem)!

ğŸ“Œ Uruchomienie kontenera Ubuntu z SSHD
bash
Copy
Edit
docker run --rm -d -p 2222:22 --name ssh-container rastasheep/ubuntu-sshd
ğŸ“Œ Teraz moÅ¼na poÅ‚Ä…czyÄ‡ siÄ™ przez SSH:

bash
Copy
Edit
ssh root@localhost -p 2222
âœ… Zalety: âœ” MoÅ¼na zalogowaÄ‡ siÄ™ do dziaÅ‚ajÄ…cego kontenera
âœ” MoÅ¼liwoÅ›Ä‡ tunelowania
âŒ Wady:
âŒ Niepotrzebne w wiÄ™kszoÅ›ci scenariuszy Dockerowych
âŒ Tworzy dodatkowy punkt ataku

6ï¸âƒ£ Jenkins + Docker Compose
ğŸ“Œ Co jest potrzebne, by uruchomiÄ‡ Dockera w Jenkinsie?

1ï¸âƒ£ Dodanie uÅ¼ytkownika Jenkinsa do grupy Docker

bash
Copy
Edit
usermod -aG docker jenkins
2ï¸âƒ£ Uruchomienie Jenkinsa w Docker Compose

ğŸ“Œ docker-compose.yml dla Jenkinsa
yaml
Copy
Edit
version: '3.8'
services:
  jenkins:
    image: jenkins/jenkins:lts
    privileged: true
    ports:
      - "8080:8080"
      - "50000:50000"
    volumes:
      - jenkins_home:/var/jenkins_home
      - /var/run/docker.sock:/var/run/docker.sock
volumes:
  jenkins_home:
ğŸ“Œ Uruchomienie

bash
Copy
Edit
docker-compose up -d
âœ… Teraz Jenkins ma dostÄ™p do Dockera! ğŸ‰

ğŸ“Œ Co jest potrzebne, by uruchomiÄ‡ Docker Compose w Jenkinsie?
1ï¸âƒ£ Instalacja docker-compose w kontenerze Jenkinsa

bash
Copy
Edit
docker exec -it jenkins bash -c "apt update && apt install -y docker-compose"
2ï¸âƒ£ Dodanie skryptu do budowania w Jenkinsfile

groovy
Copy
Edit
pipeline {
    agent {
        docker { image 'docker:latest' }
    }
    stages {
        stage('Build') {
            steps {
                sh 'docker-compose up --build'
            }
        }
    }
}
âœ… Teraz Jenkins moÅ¼e budowaÄ‡ i uruchamiaÄ‡ Dockera! ğŸš€

ğŸ”š Podsumowanie
âœ” ZarzÄ…dzanie stanem â†’ UÅ¼ycie woluminÃ³w wejÅ›ciowych/wyjÅ›ciowych
âœ” Eksponowanie portÃ³w â†’ Uruchomienie iperf3
âœ” SieÄ‡ Docker â†’ Dedykowana sieÄ‡ mostkowa
âœ” Jenkins â†’ Instalacja, konfiguracja, integracja z Docker
âœ” SSHD w kontenerze â†’ MoÅ¼liwe, ale niezalecane

ğŸ’¡ Gotowe do wdroÅ¼enia? ğŸš€